@{
    ViewBag.Title = "Báo cáo & Thống kê";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<h2>@ViewBag.Title</h2>
<hr />

<div class="panel panel-default">
    <div class="panel-heading">
        Thống kê người dùng mới trong 30 ngày qua
    </div>
    <div class="panel-body">
        <canvas id="newUsersChart"></canvas>
    </div>
</div>


@section scripts {
    <script>
    $(document).ready(function () {
        $.ajax({
            url: "@Url.Action("GetNewUserData", "Admin")",
            type: "GET",
            success: function (data) {
                const ctx = document.getElementById('newUsersChart').getContext('2d');

                new Chart(ctx, {
                    type: 'line', 
                    data: {
                        labels: data.labels, 
                        datasets: [{
                            label: '# số người dùng mới',
                            data: data.values,
                            borderColor: 'rgb(75, 192, 192)',
                            tension: 0.1
                        }]
                    },
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });
            },
            error: function (err) {
                console.error("Lỗi khi tải dữ liệu biểu đồ:", err);
            }
        });
    });
    </script>
}